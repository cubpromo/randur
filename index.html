<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>少々お待ちください</title>
  <script>
    window.onload = function () {
      const tweets = [
        "⊹⁺掃除屋へクリスマスメッセージ\n\n#ガチアクタ #GACHIAKUTA\nhttps://x.com/gachiakuta_PR/status/2003662704477937677　",
        "˚⊹⁺掃除屋へクリスマスメッセージ\n\n#ガチアクタ #GACHIAKUTA\nhttps://x.com/gachiakuta_PR/status/2003663695285727632",
        "˚⁺掃除屋へクリスマスメッセージ\n\n#ガチアクタ #GACHIAKUTA\nhttps://x.com/gachiakuta_PR/status/2003664589180010926　",
        "˚⊹掃除屋へクリスマスメッセージ\n\n\n#ガチアクタ #GACHIAKUTA\nhttps://x.com/gachiakuta_PR/status/2003667471606382637",
      ];
      
      function pickRandom(array) {
        return array[Math.floor(Math.random() * array.length)];
      }

      const KEY_TEXT = "lastTweetText"; 
      const KEY_TIME = "lastTweetTime"; 

      const lastText = localStorage.getItem(KEY_TEXT);
      const lastTime = Number(localStorage.getItem(KEY_TIME) || 0);

      const COOLDOWN_MS = 2000; // 2秒

      let randomText = pickRandom(tweets);

      if (tweets.length > 1 && lastText) {
        let guard = 0;
        while (randomText === lastText && guard < 10) {
          randomText = pickRandom(tweets);
          guard++;
        }
      }

      const now = Date.now();
      if (
        COOLDOWN_MS > 0 &&
        (now - lastTime) < COOLDOWN_MS &&
        tweets.length > 1 &&
        lastText
      ) {
        let guard = 0;
        while (randomText === lastText && guard < 10) {
          randomText = pickRandom(tweets);
          guard++;
        }
      }

      localStorage.setItem(KEY_TEXT, randomText);
      localStorage.setItem(KEY_TIME, String(now));

      const encodedText = encodeURIComponent(randomText);
      window.location.href =
        "https://twitter.com/intent/tweet?text=" + encodedText;
    };
  </script>
</head>

<body>
  <p>少々お待ちください</p>
</body>
</html>
